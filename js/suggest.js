function normalize(t){var a,e=t[0].chance/100,l=t.length;for(a=0;l>a;a++)t[a].chance=Math.round(t[a].chance/e)}function show_players(t,a){var e=$("#match"+a+" li:not(:first-child)"),l='<table style="width: 100%;border: 1px solid black;border-collapse: collapse;"><tr><th style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">Player</th><th style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">Chance to play</th><th style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">Contact</th></tr>';for(i=0;i<t.length;i++)already_in_match(e,t[i].player)||(l+='<tr><td style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">'+t[i].player+'</td><td style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">'+t[i].chance+'%</td><td style="width: 100%;border: 1px solid black;border-collapse: collapse;padding: 5px;">'+t[i].contact+"</td></tr>");l+="</table>",$("#suggest_input").append(l),$("#search_btn").css("display","none")}function already_in_match(t,a){var e=!1;return t.each(function(){$(this).text()==a&&(e=!0)}),e}function get_matches(){get_match(1),get_match(2)}function get_match(t){var a=$("#match"+t+" li:first i").text();a=="Match "+t?($("#radio-mini-"+t).css("display","none"),$("label[for='radio-mini-"+t+"']").css("display","none")):$("label[for='radio-mini-"+t+"']").text(a)}$(window).load(function(){$("#suggest_btn").click(function(){get_matches()}),$("#search_btn").click(function(){var t=0;$("#radio-mini-1").is(":checked")?t=1:$("#radio-mini-2").is(":checked")&&(t=2);var a=$("#match"+t+" li:first i").text();if(0==t||"Match 1"==a||"Match 2"==a)return void swal("Oops...","You didn't select a match!","error");var e={},l=a.split(" ");e.hour=l[0].split(".")[0],e.day=l[1],e.month=l[2].split("/")[1],$.ajax({url:"php/suggest.php",type:"POST",contentType:"application/json",data:JSON.stringify(e),dataType:"html",success:function(a){a=JSON.parse(a),normalize(a),show_players(a,t)},error:function(t,a,e){$.mobile.loading("hide"),200==t.status?(alert("status = 200"),alert(a)):(alert("status = "+t.status),alert(e))}})})});